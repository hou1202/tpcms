
<!--引入头部文件-->
{include file="default/header" title="收货地址" keywords="Aoogi商城系统"}

{load href="/static/index/css/address.css" /}


<!--头部标题模块-->
<header class="header-title">
    <a href="/personal">
        <img src="/static/index/images/back.png">
    </a>
    <h2>收货地址</h2>
</header>

<!--列表模块-->
<div class="address">

    {volist name="Address" id="a"}
        <div class="address-list">
            <div class="list-top">
                <p>{$a.name}</p>
                <p>{$a.phone}</p>
            </div>
            <div class="list-middle">
                <p>{$a.city}</p>
                <p>{$a.street}</p>
            </div>
            <div class="list-bottom">
                <i class="circle {$a.choice ?='circle-active'}" data-id="{$a.id}"></i>
                <a href="/address/{$a.id}/edit">编辑</a>
                <a data-id="{$a.id}" class="del">删除</a>
            </div>
        </div>
    {/volist}

    <!--<div class="address-list">
        <div class="list-top">
            <p>李白</p>
            <p>13564078415</p>
        </div>
        <div class="list-middle">
            <p>安徽省 . 合肥市 . 蜀山区</p>
            <p>望江西路亚夏汽车大厦1902室</p>
        </div>
        <div class="list-bottom">
            <i class="circle"></i>
            <a href="">编辑</a>
            <a href="">删除</a>
        </div>

    </div>

    <div class="address-list">
        <div class="list-top">
            <p>李白</p>
            <p>13564078415</p>
        </div>
        <div class="list-middle">
            <p>安徽省 . 合肥市 . 蜀山区</p>
            <p>望江西路亚夏汽车大厦1902室</p>
        </div>
        <div class="list-bottom">
            <i class="circle"></i>
            <a href="">编辑</a>
            <a href="">删除</a>
        </div>

    </div>

    <div class="address-list">
        <div class="list-top">
            <p>李白</p>
            <p>13564078415</p>
        </div>
        <div class="list-middle">
            <p>安徽省 . 合肥市 . 蜀山区</p>
            <p>望江西路亚夏汽车大厦1902室</p>
        </div>
        <div class="list-bottom">
            <i class="circle"></i>
            <a href="">编辑</a>
            <a href="">删除</a>
        </div>

    </div>-->


</div>

<!--引入加载footer文件-->

<div class="bottom">
    <a href="/address/create">
        <i></i>
    </a>
</div>

</body>



<script>

    /**
    * 更新默认地址
    * */
    $(".circle").click(function(){
        var id = $(this).attr('data-id');
        var _that = $(this);
        $.post('/address/choice/'+id,'',function(obj){
            if(obj.code == 1){
                alertConfirm(obj.msg);
                $(".circle").removeClass('circle-active');
                _that.addClass('circle-active');
            }else{
                alertConfirm(obj.msg);
            }

        });
    });

    /**
     * 删除地址
     * */
    $(".del").click(function(){
        var id = $(this).attr('data-id');
        var _that = $(this);
        $.post('/address/'+id,{'_method':'DELETE'},function(obj){
            if(obj.code == 1){
                alertConfirm(obj.msg);
                _that.parent().parent().remove();
            }else{
                alertConfirm(obj.msg);
            }

        });
    });




</script>







</html>